var $jscomp={scope:{},checkStringArgs:function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable: true,writable: true,value:b})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var e=b.length,f=a.length,g=Math.max(0,Math.min(c|0,b.length)),h=0;h<f&&g<e;)if(b[g++]!=a[h++])return false;return h>=f}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===c&&(c=b.length);for(var e=Math.max(0,Math.min(c|0,b.length)),f=a.length;0<f&&0<e;)if(b[--e]!=a[--f])return false;return 0>=f}},"es6-impl","es3");
var qcom_formulario=function(a,b,c,d,e,f,g,h,l,m,n,p,q,r,k,t,u,v,w,x,y){this.getClaseEnum=function(){return a};this.getClaseExchange=function(){return b};this.getDLLExchange=function(){return c};this.getClaseCommon=function(){return d};this.getDLLCommon=function(){return e};this.getClaseEventos=function(){return f};this.getDLLEventos=function(){return g};this.getClaseEnumEsp=function(){return r};this.getClaseExchangeEsp=function(){return k};this.getDLLExchangeEsp=function(){return t};this.getClaseCommonEsp=
function(){return u};this.getDLLCommonEsp=function(){return v};this.getClaseEventosEsp=function(){return w};this.getDLLEventosEsp=function(){return x};this.getFormID=function(){return h};this.getPostear=function(){return l};this.getBorrar=function(){return m};this.getUsuarioModif=function(){return n};this.getUsuarioPostear=function(){return p};this.getUsuarioBorrar=function(){return q}},qcom_configuracion=function(a,b,c,d,e,f,g,h,l,m,n,p,q,r){sessionStorage.setItem("Sucursal",q);this.getEmpresa=function(){return a};
this.getUsuario=function(){return b};this.getDominio=function(){return c};this.getMoneda=function(){return d};this.getProveed_Id=function(){return e};this.getCliente_Id=function(){return f};this.getClienteSucursal=function(){return g};this.getLegajo=function(){return h};this.getVendedor_Id=function(){return l};this.getFormulario=function(){return p};this.getCobrador_Id=function(){return m};this.getSitio=function(){return n};this.getSucursal=function(){return sessionStorage.getItem("Sucursal")};this.getInstalacion=
function(){return r};this.getValorVariable=function(k){switch(k){case "{gEmpresa}":k=a;break;case "{gUsuario}":k=b;break;case "{gMoneda}":k=d;break;case "{gDominio}":k=c;break;case "{gProveed_Id}":k=e;break;case "{gCliente_Id}":k=f;break;case "{gClienteSucursal}":k=g;break;case "{gLegajo}":k=h;break;case "{gVendedor_Id}":k=l;break;case "{gCobrador_Id}":k=m;break;case "{gSitio}":k=n;break;case "{gSucursal}":k=sessionStorage.getItem("Sucursal");break;case "{gFormulario}":k=p;break;case "{gPrueba}":k=
"1"}return k};this.setValorVariable=function(a,b){switch(a){case "{gSucursal}":qcom_CambiarValorVariableSesion("Sucursal",b)}}},qcom_control=function(a,b,c,d,e,f,g,h,l,m,n,p,q,r){var k=d,t=q,u=r,v= true,w= true;l&&a.addClass("quasar-requerido");switch(b){case 1:a.addClass("quasar-editortexto");break;case 2:a.addClass("quasar-editornumerico");break;case 3:a.addClass("quasar-editorfecha");break;case 5:a.addClass("quasar-editorcombo");break;case 4:a.addClass("quasar-editorcheckbox");break;case 9:a.addClass("quasar-editorporcentaje");
break;case 10:a.addClass("quasar-editoroptiongroup");break;case 13:a.addClass("quasar-editormascara");a[0].setAttribute("MaskDefecto",u);a[0].setAttribute("ValorAnteMask","");break;case 14:a.addClass("quasar-editorHTML");break;case 15:a.addClass("quasar-editorhora");break;case 16:a.addClass("quasar-editorfecha")}this.getControl=function(){return a};this.getTipoControl=function(){return b};this.getTipoDato=function(){return c};this.getDefecto=function(){return"string"===typeof k||k instanceof String?
k.startsWith("{")?gConfiguracion.getValorVariable(k):k:k};this.setDefecto=function(a){k=a};this.getHabilitado=function(){return g};this.getVisible=function(){return e};this.getVisibleXPais=function(){return f};this.getControlConjunto=function(){return h};this.getRequerido=function(){return l};this.getGrillaEdicion=function(){return m};this.getNuevoBlanquea=function(){return n};this.getRelleno=function(){return p};this.getIdentidad=function(){return t};this.setIdentidad=function(a){t=a};this.getMascara=
function(){return u};this.setMascara=function(a){u=a};this.getHabilitadoxSeteo=function(){return w};this.setHabilitadoxSeteo=function(a){w=a};this.getVisiblexSeteo=function(){return v};this.setVisiblexSeteo=function(a){v=a};""!=h&&$("#div"+h)[0].setAttribute("VisiblexPais",f)},qcom_controlGrupo=function(a,b,c){this.getVisible=function(){return b};this.getVisibleXPais=function(){return c};this.getNombreControl=function(){return a}},qcom_segmento=function(a){var b=a.indexOf("Segmento_Id"),c=a.slice(b+
11),d="",e= false,f="",g="",h="                   ".split(" "),l="                   ".split(" "),m="                   ".split(" "),n="       ".split(" "),p="       ".split(" "),q="       ".split(" "),r=[0,0,0,0,0,0,0,0],k=[],t= true;this.getPrefijo=function(){return""};this.getSufijo=function(){return c};this.getPrincipal=function(){return e};this.getTabla=function(){return f};this.getIdentidad=function(){return g};this.getIdSeg=function(){return d};this.getNombre=function(){return a};this.getCampoCtrl=
function(a){return h[a-1]};this.getCampoCtrlAdic=function(a){return m[a-1]};this.getCampoCtrlSeg=function(a){return l[a-1]};this.getCampoNCCtrl=function(a){return n[a-1]};this.getCampoNCCtrlSeg=function(a){return p[a-1]};this.getCampoSegAlias=function(a){return q[a-1]};this.getCampoLongitud=function(a){return r[a-1]};this.getPosiciones=function(){return k};this.getCampos=function(){return h};this.getCamposSeg=function(){return l};this.getCamposAdic=function(){return m};this.getCamposNC=function(){return n};
this.getCamposSegNC=function(){return p};this.getCamposSegAlias=function(){return q};this.getVisibleXPais=function(){return t};this.setPrincipal=function(a){e=a};this.setTabla=function(a){f=a};this.setIdentidad=function(a){g=a};this.setIdSeg=function(a){d=a};this.setCampoCtrl=function(a,b){h[a-1]=b};this.setCampoCtrlAdic=function(a,b){m[a-1]=b};this.setCampoCtrlSeg=function(a,b){l[a-1]=b};this.setCampoSegAlias=function(a,b){q[a-1]=b};this.setCampoLongitud=function(a,b){r[a-1]=b};this.setCampoNCCtrl=
function(a,b){n[a-1]=b};this.setCampoNCCtrlSeg=function(a,b){p[a-1]=b};this.SetPosicion=function(a){return k.push(a)};this.setVisibleXPais=function(a){t=a}},qcom_Relacion=function(a,b,c,d,e,f,g,h,l){var m=-1;this.getTablaMaster=function(){return a};this.getTablaDetalle=function(){return b};this.getColMaster=function(){return c};this.getColMaster2=function(){return d};this.getColMaster3=function(){return e};this.getColDetalle=function(){return f};this.getColDetalle2=function(){return g};this.getColDetalle3=
function(){return h};this.getTipoCtrlDetalle=function(){return l};this.getValorMaster=function(){return m};this.setValorMaster=function(a){m=a}};
function qcom_ObtenerValorControl(a){lRetVal="";switch(a.getTipoControl()){case 1:lRetVal=qcom_ObtenerValorTextEditor(a);break;case 2:return qcom_ObtenerValorNumEditor(a);case 3:lRetVal=qcom_ObtenerValorFechaEditor(a);break;case 5:lRetVal=qcom_ObtenerValorCombo(a);break;case 4:return qcom_ObtenerValorCheckBox(a);case 9:return qcom_ObtenerValorPorcEditor(a);case 10:return qcom_ObtenerValorOptionGroup(a);case 11:return qcom_ObtenerDescripcionSegmento(a.getControl());case 12:return qcom_ObtenerValorUpLoad(a);
case 13:lRetVal=qcom_ObtenerValorMaskEditor(a);break;case 14:lRetVal=qcom_ObtenerValorHTMLEditor(a);break;case 15:lRetVal=qcom_ObtenerValorDateEditor(a);break;case 16:lRetVal=qcom_ObtenerValorFechaHoraEditor(a)}2==a.getTipoDato()&&""==lRetVal&&(lRetVal="0");return lRetVal}function qcom_ObtenerValorTextEditor(a){return 0==a.getControl().igTextEditor().length?"":a.getControl().igTextEditor()[0].value}
function qcom_ObtenerValorMaskEditor(a){return 0==a.getControl().igMaskEditor().length||""==a.getControl().igMaskEditor()[0].value.replace(/\-|\./g,"").trim()?"":a.getControl().igMaskEditor()[0].value}function qcom_ObtenerValorHTMLEditor(a){return a.getControl().igHtmlEditor("getContent","html")}function qcom_ObtenerValorNumEditor(a){lValRet=a.getControl().igNumericEditor("value");""==lValRet&&(lValRet="0");return lValRet}
function qcom_ObtenerValorPorcEditor(a){lValRet=a.getControl().igPercentEditor("value");""==lValRet&&(lValRet="0");return lValRet}function qcom_ObtenerValorOptionGroup(a){a=a.getControl().selector.substring(1,a.getControl().selector.length);a=$('input[name="'+a+'"]:checked');lValRet="";0<a.length&&(lValRet=a[0].value);return lValRet}
function qcom_ObtenerValorFechaEditor(a){a=a.getControl().igDatePicker("value");if(null==a||""==a)a=new Date,a.setUTCFullYear(1,0,2),a.setUTCHours(0,0,0,0),a=a.toJSON();else{var b=new Date;b.setUTCFullYear(a.getFullYear(),a.getMonth(),a.getDate());b.setUTCHours(0,0,0,0);a=b.toJSON()}19<a.length&&(a=a.substring(0,19));return a}
function qcom_ObtenerValorFechaHoraEditor(a){a=a.getControl().igDatePicker("value");if(null==a||""==a)a=new Date,a.setUTCFullYear(1,0,2),a.setUTCHours(0,0,0,0),a=a.toJSON();else{var b=new Date;b.setUTCFullYear(a.getFullYear(),a.getMonth(),a.getDate());b.setUTCHours(a.getHours(),a.getMinutes(),a.getSeconds(),0);a=b.toJSON()}19<a.length&&(a=a.substring(0,19));return a}
function qcom_ObtenerValorCombo(a){if(a.getControl().igCombo("option","multiSelection").enabled){var b="";a=a.getControl().igCombo("selectedItems");if(void 0!=a)if(0<a.filter(qcom_ComboMultiTodosSeleccionado).length)b="*";else{var c="";a.forEach(function(a){b+=c+a.data.Valor;c=","})}return b}if(4==a.getTipoDato())a.getControl().igCombo("selectedItems");else return""!=a.getControl().igCombo("text")?$.isArray(a.getControl().igCombo("value"))?a.getControl().igCombo("value")[0]:a.getControl().igCombo("value"):
2==a.getTipoDato()?0:""}function qcom_ObtenerValorCheckBox(a){return a.getControl().prop("checked")}function qcom_ObtenerValorUpLoad(a){a=a.getControlConjunto();return gUpLoads[a]}function qcom_ObtenerValorDateEditor(a){return a.getControl().igDateEditor("option","value")}
function qcom_EstablecerFoco(a){var b="#"+a;if(qcom_existeControl(b))$(b).focus();else if(b="#"+a+"_1",qcom_existeControl(b))$(b).focus();else for(var b=gSegmentos.length,c= false,d=0;d<b&&!c;d++)if(c=gSegmentos[d].getNombre()==a){lSeg=gSegmentos[d];var e=lSeg.getPosiciones();gControles[lSeg.getTabla()][0][e[0]].getControl().focus()}}
function qcom_AsignarValorControl(a,b,c){if(null!=a&&null!=b)switch(a.getTipoControl()){case 1:qcom_AsignarValorTextEditor(a,b);break;case 2:qcom_AsignarValorNumEditor(a,b);break;case 3:c?a.getControl().igDatePicker("value",b):qcom_AsignarValorFechaEditor(a,b);break;case 5:qcom_AsignarValorCombo(a,b);break;case 4:qcom_AsignaValorCheckBox(a,b);break;case 9:qcom_AsignarValorPorcEditor(a,b);break;case 10:qcom_AsignarValorOptionGroup(a,b);break;case 12:a=a.getControlConjunto();b=b.trim();""!=b?(c=b.split("|"),
1==c.length?"B"==b?qcom_AsignarValorUpLoad(a,"","B"):qcom_AsignarValorUpLoad(a,b,"X"):2==c.length?qcom_AsignarValorUpLoad(a,c[1],c[0]):qcom_AsignarValorUpLoad(a,c[1]+"|"+c[2],c[0])):qcom_AsignarValorUpLoad(a,b,"");break;case 13:c&&(c=a.getControl().selector,qcom_RecrearMaskEditor(c,a.getMascara()));qcom_AsignarValorMaskEditor(a,b);a.getControl()[0].setAttribute("ValorAnteMask",b);break;case 14:qcom_AsignarValorHTMLEditor(a,b);break;case 15:qcom_AsignarValorDateEditor(a,b);break;case 16:if(c){if("AHORA"==
a.getIdentidad()){var d=new Date;c=d.getHours();var e=d.getMinutes();b.setHours(c,e,0)}else"AHORASEG"==a.getIdentidad()&&(d=new Date,c=d.getHours(),e=d.getMinutes(),d=d.getSeconds(),b.setHours(c,e,d));a.getControl().igDatePicker("value",b)}else qcom_AsignarValorFechaEditor(a,b)}}function qcom_AsignarValorTextEditor(a,b){null==b&&(b="");""!=b&&0!=a.getRelleno()&&(b=("0000000000"+b).slice(-1*a.getRelleno()));a.getControl().igTextEditor("value",b)}
function qcom_AsignarValorHTMLEditor(a,b){null==b&&(b="");a.getControl().igHtmlEditor("setContent",b,"html")}function qcom_AsignarValorMaskEditor(a,b){null==b&&(b="");a.getControl().igMaskEditor("value",b)}function qcom_AsignarValorNumEditor(a,b){if(null==b||""==b)b=0;a.getControl().igNumericEditor("value",b)}function qcom_AsignarValorPorcEditor(a,b){if(null==b||""==b)b=0;a.getControl().igPercentEditor("value",b)}
function qcom_AsignarValorOptionGroup(a,b){var c=a.getControl().selector.substring(1,a.getControl().selector.length),c=$('input[name="'+c+'"][value="'+b+'"]');0<c.length&&(c[0].checked= true)}function qcom_AsignarValorUpLoad(a,b,c){var d=b.split("|");0<d.length&&$("#"+a).val(d[0]);gUpLoads[a]=""==b?c:c+"|"+b}function qcom_AsignarValorDateEditor(a,b){if(null==b||""==b)b="00:00";var c=b.split(":");a.getControl().igDateEditor("option","value",new Date(2,0,1,c[0],c[1],0))}
function qcom_ObtenerTipoContDownLoad(a,b){var c="";if("false"==a||0==a)if(c="data:application/octet-stream;base64,","jpg"==b||"jpeg"==b||"jfif"==b||"png"==b||"gif"==b||"bmp"==b)c="data:image/"+b+";base64,";return c}function qcom_ObtenerFechaEspecial(a){if("Hoy"==a){a=new Date;var b=a.getMonth()+1,c=a.getDate();a=(10>c?"0":"")+c+"/"+(10>b?"0":"")+b+"/"+a.getFullYear()}return a}
function qcom_AsignarValorFechaEditor(a,b){if("string"==jQuery.type(b)){var c=b.replace(/\D/g," ").split(" ");2<c[0].length?"0001"!=c[0]?(c[1]--,c=3<c.length?new Date(c[0],c[1],c[2],c[3],c[4],c[5]):new Date(c[0],c[1],c[2],0,0,0),a.getControl().igDatePicker("value",c)):a.getControl().igDatePicker("value",""):"0001"!=c[2]&&"0002"!=c[2]?(c[1]--,c=new Date(c[2],c[1],c[0],0,0,0),a.getControl().igDatePicker("value",c)):a.getControl().igDatePicker("value","")}else"0001"==b.getFullYear()?a.getControl().igDatePicker("value",
""):a.getControl().igDatePicker("value",b)}
function qcom_AsignarValorFechaHoraEditor(a,b){if("string"==jQuery.type(b)){var c=b.replace(/\D/g," ").split(" ");2<c[0].length?"0001"!=c[0]?(c[1]--,c=3<c.length?new Date(c[0],c[1],c[2],c[3],c[4],c[5]):new Date(c[0],c[1],c[2],0,0,0),a.getControl().igDatePicker("value",c)):a.getControl().igDatePicker("value",""):"0001"!=c[2]&&"0002"!=c[2]?(c[1]--,c=new Date(c[2],c[1],c[0],0,0,0),a.getControl().igDatePicker("value",c)):a.getControl().igDatePicker("value","")}else"0001"==b.getFullYear()?a.getControl().igDatePicker("value",
""):a.getControl().igDatePicker("value",b)}
function qcom_AsignarValorCombo(a,b){if(a.getControl().igCombo("option","multiSelection").enabled){if(a.getControl().igCombo("deselectAll"),""!=b.trim())if(b.contains("*")){a.getControl().igCombo("selectAll");var c=a.getControl().igCombo("textInput");c[0].value="Todos"}else if(c=b.split(","),c.length==a.getControl().igCombo("items").length-1)a.getControl().igCombo("selectAll"),c=a.getControl().igCombo("textInput"),c[0].value="Todos";else{for(var d=0;d<c.length-1;d++)c[d]=c[d].trim();a.getControl().igCombo("value",
c)}}else $.isNumeric(b)?a.getControl().igCombo("value",b):(null==b&&(b=""),a.getControl().igCombo("value",b.trim()))}function qcom_AsignaValorCheckBox(a,b){"string"==typeof b?"false"==b.toLowerCase()?a.getControl().prop("checked", false):"true"==b.toLowerCase()&&a.getControl().prop("checked", true):a.getControl().prop("checked",b)}
function qcom_AsignarCantDecimales(a,b){if(null==b||""==b)b=0;a.getControl().igNumericEditor("option","minDecimals",b);a.getControl().igNumericEditor("option","maxDecimals",b)}
function qcom_ValorCamposClavesaPrincipal(){qcom_InicializarColumnasSegmento( true);for(var a=gCamposClaves.length,b=0;b<a;b++){var c=gCamposClaves[b];gEntidad.Principal[0][c]=qcom_ObtenerValorControl(gControles.Principal[0][c])}a=gSegmentos.length;for(b=0;b<a;b++)if(lSeg=gSegmentos[b],qcom_EsTablaPlana(lSeg.getTabla()))for(c=1;8>=c;c++)""!=lSeg.getCampoNCCtrlSeg(c)&&""!=lSeg.getCampoNCCtrl(c)?gEntidad[lSeg.getTabla()][0][lSeg.getCampoNCCtrlSeg(c)]=qcom_ObtenerValorControl(gControles[lSeg.getTabla()][0][lSeg.getCampoNCCtrl(c)]):
""!=lSeg.getCampoNCCtrlSeg(c)&&(gEntidad[lSeg.getTabla()][0][lSeg.getCampoNCCtrlSeg(c)]=qcom_ObtenerValorControl(gControles[lSeg.getTabla()][0][lSeg.getCampoNCCtrlSeg(c)]));gEntidad.Principal[0].Existe= false}
function qcom_TablasPlanasaControles(a){$.each(gTablasPlanas,function(b,c){""!=a&&-1===a.indexOf("|"+c+"|")||$.each(gEntidad[c][0],function(a,b){"Existe"!=a&&"IDCol"!=a&&null!=gControles[c][0][a]&&qcom_AsignarValorControl(gControles[c][0][a],b, false)})});qatrib_TablaaControles();$.each(gComboMultiAux,function(a,c){var b=gComboMulti[c],e=$("#"+c).igCombo("items");$("#"+c).igCombo("selectAll");$.each(e,function(a,d){1!=gEntidad[b.Tabla][0][d.data.Valor]&&$("#"+c).igCombo("deselectByValue",d.data.Valor)})});
qcom_AsignarValorCodigoNuevo();qcom_LimpiarControlesOcultosSegmento();qcom_HabilitarGuardar()}function qcom_CampoClaveAsocaSegmento(a){for(var b= false,c=gSegmentos.length,d=0;d<c;d++)if(lSeg=gSegmentos[d],lSeg.getPrincipal())for(var e=1;20>=e&&!b;e++)b=lSeg.getCampoCtrl(e)==a||lSeg.getCampoCtrlAdic(e)==a;return b}function ObtenerSegmentoPrincipal(){for(var a=null,b=gSegmentos.length,c=0;c<b&&null==a;c++)lSeg=gSegmentos[c],lSeg.getPrincipal()&&(a=lSeg);return a}
function qcom_InicializarForm(a,b,c){$("#btnLupaAnt").prop("disabled",c);$("#btnLupaSig").prop("disabled",""==QLupaAdv_Navegador.Primero);$("#btnLupaPrim").prop("disabled",c);$("#btnLupaUlt").prop("disabled",""==QLupaAdv_Navegador.Ultimo);$("#btnLupaAntMbl").prop("disabled",c);$("#btnLupaSigMbl").prop("disabled",""==QLupaAdv_Navegador.Primero);$("#btnLupaPrimMbl").prop("disabled",c);$("#btnLupaUltMbl").prop("disabled",""==QLupaAdv_Navegador.Ultimo);$.each(gTablasPlanas,function(c,d){b||$.each(gEntidad[d][0],
function(a,b){gEntidad[d][0][a]=null;0<gEntidadAux[d].length&&(gEntidadAux[d][0][a]=null)});$.each(gControles[d][0],function(c,d){"Existe"!=c&&null!=d&&(d.getControl(),b||(a||-1>=$.inArray(c,gCamposClaves)&&!qcom_CampoClaveAsocaSegmento(c))&&d.getNuevoBlanquea()&&qcom_AsignarValorControl(d,d.getDefecto(), true),""!=d.getControlConjunto()&&(d.getHabilitado()&&d.getHabilitadoxSeteo()?qcom_HabilitarControl(d.getControlConjunto()):qcom_DesHabilitarControl(d.getControlConjunto()),d.getVisible()&&d.getVisibleXPais()&&
d.getVisiblexSeteo()?qcom_MostrarControl(d.getControlConjunto()):qcom_OcultarControl(d.getControlConjunto())))})});$.each(gSegmentos,function(a,b){b.getVisibleXPais()||qcom_OcultarControl(b.getNombre())});qcom_AsignarValorCodigoNuevo();qcom_HabilitarGuardar();for(var d=gGrupos.length,e=0;e<d;e++)gGrupos[e].getVisible()&&gGrupos[e].getVisibleXPais()?qcom_MostrarControl(gGrupos[e].getNombreControl()):qcom_OcultarControl(gGrupos[e].getNombreControl());$.each(gGrillasAux,function(a,b){var c=gGrillas[b].Tabla;
gGrillas[b].UltimaPK=0;gEntidad[c].splice(0,gEntidad[c].length);gEntidadAux[c].splice(0,gEntidadAux[c].length);gGrillas[b].AutoFormateable?qgrillas_CrearGrilla(gGrillas[b].NombreControl,gEntidad[c],null):gGrillas[b].EsArbol?(gGrillas[b].Control.igTreeGrid("option","dataSource",gEntidad[c]),gGrillas[b].Control.igTreeGrid("dataBind")):(gGrillas[b].PermiteOrdenar&&gGrillas[b].Control.igGridSorting("clearSorting"),0<gGrillas[b].RegistrosPorPagina&&gGrillas[b].Control.igGridFiltering("filter",[]),gGrillas[b].Control.igGrid("option",
"dataSource",gEntidad[c]),gGrillas[b].Control.igGrid("dataBind"),gGrillas[b].Control.igGridSelection("clearSelection"),gGrillas[b].ValorPK=-1,gGrillas[b].ColIdEnEdicion=-1,gGrillas[b].ColumnaEnEdicion="");gGrillas[b].Visible&&gGrillas[b].VisibleXPais?qcom_MostrarControl(gGrillas[b].NombreControl):qcom_OcultarControl(gGrillas[b].NombreControl)});$.each(gGraficosAux,function(a,b){var c=gGraficos[b].Tabla;gEntidad[c].splice(0,gEntidad[c].length);gEntidadAux[c].splice(0,gEntidadAux[c].length);c=gGraficos[b].NombreControl;
graf_MostrarAdicGrafico(c, false);graf_DestruirGrafico(c);gGraficos[b].Visible&&gGraficos[b].VisibleXPais?qcom_MostrarControl(gGraficos[b].NombreControl):qcom_OcultarControl(gGraficos[b].NombreControl)});$.each(gListasAdjuntosAux,function(a,b){var c=gListasAdjuntos[b].Tabla;gEntidad[c].splice(0,gEntidad[c].length);gEntidadAux[c].splice(0,gEntidadAux[c].length);c=gListasAdjuntos[b].NombreControl;qlstadj_VaciarLista(c);gListasAdjuntos[b].UltId=0;gListasAdjuntos[b].Visible&&gListasAdjuntos[b].VisibleXPais?
qcom_MostrarControl(c):qcom_OcultarControl(c)});$.each(gComboMultiAux,function(a,b){var c=gComboMulti[b],d=$("#"+b).igCombo("items");$("#"+b).igCombo("deselectAll");$.each(d,function(a,b){gEntidad[c.Tabla][0][b.data.Valor]= false;gEntidadAux[c.Tabla][0][b.data.Valor]= false});c.Visible&&c.VisibleXPais?qcom_MostrarControl(c.NombreControl):qcom_OcultarControl(c.NombreControl)});qgrdpvt_DestruirGrdPvt();qatrib_InicializarControles();b||qcom_InicSolapasActivadas( false);$("#divPrincipal").removeClass("divPrincipalOculto");
c&&""!=gPrimerCtr&&qcom_EstablecerFoco(gPrimerCtr);qevt_EjecutarSiguiente()}function qcom_InicSolapasActivadas(a){var b=gSolapas.length;if(0<b)for(var c=$("#liSolapa_Datos")[0].classList.contains("active"),d=0;d<b;d++)if(gSolapas[d].Activada= false,!c&&a){var e=gSolapas[d].Nombre;$("#li"+e)[0].classList.contains("active")&&(gSolapas[d].Activada= true,qevt_AgregarEventoaTmp(e+"_Activated1rsttime",null, true))}}
function qcom_DeshabilitarTodo(){$.each(gTablasPlanas,function(a,b){$.each(gControles[b][0],function(a,b){"Existe"!=a&&null!=b&&(b.getControl(),""!=b.getControlConjunto()?qcom_DesHabilitarControl(b.getControlConjunto()):qcom_DesHabilitarControl(b.getControl()[0].id))})});for(var a=gSegmentos.length,b=0;b<a;b++)qcom_DeshabilitarSegmento(gSegmentos[b].getNombre());$.each(gGrillasAux,function(a,b){gGrillas[b].EsArbol?(gGrillas[b].Control.igTreeGridUpdating("option","enableAddRow", false),gGrillas[b].Control.igTreeGridUpdating("option",
"enableDeleteRow", false),gGrillas[b].Control.igTreeGridUpdating("option","editMode","none")):gGrillas[b].Editable||gGrillas[b].AutoFormateable?(gGrillas[b].Control.igGridUpdating("option","enableAddRow", false),gGrillas[b].Control.igGridUpdating("option","enableDeleteRow", false),gGrillas[b].Control.igGridUpdating("option","editMode","none")):(gGrillas[b].Control.igGridUpdating("option","enableAddRow", false),gGrillas[b].Control.igGridUpdating("option","enableDeleteRow", false),$("#btnAceptar"+b).hide(),$.each(gControles[gGrillas[b].Tabla][0],
function(a,b){"Existe"!=a&&null!=b&&(""!=b.getControlConjunto()?qcom_DesHabilitarControl(b.getControlConjunto()):qcom_DesHabilitarControl(b.getControl()[0].id))}));$("#lbl"+gGrillas[b].NombreControl+" a:visible").hide()});qatrib_DeshabilitarAtribGralesEspec();qevt_EjecutarSiguiente()}
function qcom_ControlesaTablasPlanas(){qcom_InicializarColumnasSegmento( false);"D"==gTipoVersion?$.each(gTablasPlanas,function(a,b){$.each(gControles[b][0],function(a,d){null==d||qcom_EsControlOcultoSegmento(b,a)?null!=d||a.startsWith("Segmento")||"Usuario_Id"==a||"Empresa_Id"==a||"Posteado"==a||a.startsWith("Anulad")||(gEntidad[b][0][a]=null):(lValorCtr=qcom_ObtenerValorControl(d),gEntidad[b][0][a]=lValorCtr)})}):$.each(gTablasPlanas,function(a,b){$.each(gControles[b][0],function(a,d){"Existe"==a||
null==d||qcom_EsControlOcultoSegmento(b,a)||(lValorCtr=qcom_ObtenerValorControl(d),gEntidad[b][0][a]=lValorCtr)})});qcom_ValorCamposClavesaPrincipal();qatrib_ControlesaTablas();$.each(gComboMultiAux,function(a,b){var c=gComboMulti[b],d=$("#"+b).igCombo("selectedItems");$.each(gEntidad[c.Tabla][0],function(a,b){"IDCol"!=a&&(gEntidad[c.Tabla][0][a]= false)});null!=d&&$.each(d,function(a,b){gEntidad[c.Tabla][0][b.data.Valor]= true})});gEntidad.Principal[0].Existe= false}
function qcom_ComboMultiTodosSeleccionado(a,b,c){return"*"==a.data.Valor}function qcom_ComboMultiSeleccionar(a,b){var c= false,d= false;void 0!=b.items&&(c=0<b.items.filter(qcom_ComboMultiTodosSeleccionado).length);void 0!=b.oldItems&&(d=0<b.oldItems.filter(qcom_ComboMultiTodosSeleccionado).length);c&&!d?$(a).igCombo("selectAll"):d&&!c?$(a).igCombo("deselectAll"):d&&c&&b.items.length!=b.oldItems.length&&$(a).igCombo("deselectByIndex",0)}
function qcom_ComboMultiDropDownClose(a){var b=$(a).igCombo("selectedItems");void 0!=b&&0<b.filter(qcom_ComboMultiTodosSeleccionado).length&&($(a).igCombo("textInput")[0].value="Todos")}function qcom_ObtenerDescripcionSegmento(a){for(var b="",c=gSegmentos.length,d= false,e=0;e<c&&!d;e++)if(gSegmentos[e].getNombre()==a){lSeg=gSegmentos[e];for(var d= true,f="",g=lSeg.getPosiciones(),h=0;h<g.length;h++)b+=f+qcom_ObtenerValorControl(gControles[lSeg.getTabla()][0][g[h]]),f="-"}return b}
function qcom_AsignarPartesSegmento(a,b){var c=gSegmentos.length,d= false;if(""!=b)for(var e=b.split("-"),f=e.length,g=0;g<c&&!d;g++)if(gSegmentos[g].getNombre()==a){lSeg=gSegmentos[g];for(var d= true,h=lSeg.getPosiciones(),l=0;l<h.length&&l<f;l++)e[l]=e[l].replace("*","-"),qcom_AsignarValorControl(gControles[lSeg.getTabla()][0][h[l]],e[l], false)}}
function qcom_ObtenerEstructuraEntidad(a){var b=sessionStorage.getItem("idses");$("#divCargando").addClass("show");var c=gConfiguracion.getSitio(),b={pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pIdSes:b};$.ajax({type:"POST",url:c+"AjaxHandler/FormConfig.ashx",data:b,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");void 0==b.e?(gEntidad=JSON.parse(b.c),
gEntidadAux=JSON.parse(b.c),gEntidadAyuda=JSON.parse(b.c),gTieneDsEsp="1"==b.esp,null==gControles&&(gControles=JSON.parse(b.c),null!=a&&a())):($(window)[0].parent.qprin_AbrirSigForm(),qcom_TratarError(b.e))}).fail(function(a,b,c){$("#divCargando").removeClass("show");$(window)[0].parent.qprin_AbrirSigForm();qcom_Alerta(c,"danger",null)})}
function qcom_EjecutarAccion(a,b,c,d,e,f,g,h,l,m,n,p){$("#divCargando").addClass("show");var q=window.pageXOffset,r=window.pageYOffset;g="undefined"!==typeof g?g:"";var k=qcom_CargarTablasAEnviar(l,gEntidad),t=sessionStorage.getItem("idses");g={pDsEntidad:k,pTieneDsEsp:gTieneDsEsp,pDllExchange:gFormulario.getDLLExchange(),pClaseExchange:gFormulario.getClaseExchange(),pClaseEnum:gFormulario.getClaseEnum(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllExchangeEsp:gFormulario.getDLLExchangeEsp(),
pClaseExchangeEsp:gFormulario.getClaseExchangeEsp(),pClaseEnumEsp:gFormulario.getClaseEnumEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pNombreAccion:a,pTablasPlanas:gTablasPlanas.join("|"),pFormulario:gConfiguracion.getFormulario(),pIdSes:t,pCodigoConsulta:g,pAccionEspecializada:m,pTieneTablaAutoFormateable:gTieneGrillasAutoForm};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/AcEjecutar.ashx",data:g,dataType:"json"}).done(function(g){$("#divCargando").removeClass("show");
var k=void 0!=g.e;k&&g.e.startsWith("cons:")?qcom_EjecutarAccion_Mens(a,b,c,d,e,f,g.e,h,l,m,n,p):k&&g.e.startsWith("error:")?(qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show"),qcom_TratarError(g.e)):(qcom_HabilitarGuardar(),c?qevt_EjecutarSiguiente():k?b?(qevt_VaciarEventosTmp(),qevt_InicializarForm( false, false, false),null!=f&&qevt_AgregarEventoaTmp(f,null, true)):(p&&""!=gCampoCodigoNuevo&&0<gCamposClaves.length&&"Guardar"==a&&(g=qcom_ObtenerValorControl(gControles.Principal[0][gCampoCodigoNuevo]),
k=gCamposClaves[0],qcom_ObtenerValorControl(gControles.Principal[0][k])!=g&&qcom_AsignarValorControl(gControles.Principal[0][k],g, false)),qevt_EjecutarSiguiente()):(gEntidad=qcom_CargarTablasARefrescar(h,g,gEntidad),h=""==h?"":"|"+h+"|",qcom_CargarControlesFormulario(h,n,b),document.documentElement.scrollTop=r,document.documentElement.scrollLeft=q,document.body.scrollTop=r,document.body.scrollLeft=q,qevt_EjecutarSiguiente()),""!=d&&qcom_MensajeExito(d))}).fail(function(a,b,c){qevt_VaciarEventosTmp();
$("#divCargando").removeClass("show");qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show");qcom_Alerta(c,"danger",null)})}function qcom_EjecutarAccion_Mens(a,b,c,d,e,f,g,h,l,m,n,p){var q=g.substring(5).split("|");qcom_Confirmar(q[1],"warning",function(){qcom_EjecutarAccion(a,b,c,d,e,f,q[0],h,l,m,n,p)},function(){qevt_VaciarEventosTmp()})}
function qcom_CargarControlesFormulario(a,b,c){qcom_TablasPlanasaControles(a);$.each(gGrillasAux,function(d,e){var f=gGrillas[e].Tabla;if(""==a||-1!==a.indexOf("|"+f+"|"))if(gGrillas[e].AutoFormateable)qgrillas_CrearGrilla(gGrillas[e].NombreControl,gEntidad[f],gEntidad[f+"fmt"]);else if(gGrillas[e].EsArbol){if(""==gGrillas[e].CampoAutonumerico||0==gEntidad[f].length)gGrillas[e].UltimaPK=gEntidad[f].length;else{var g=gGrillas[e].CampoAutonumerico,g=gEntidad[f][gEntidad[f].length-1][g];gGrillas[e].UltimaPK=
g}gGrillas[e].Control.igTreeGrid("option","dataSourceType","array");gGrillas[e].Control.igTreeGrid("option","dataSource",gEntidad[f]);gGrillas[e].Control.igTreeGrid("dataBind");qgrillas_ColapsarArbol(e)}else""==gGrillas[e].CampoAutonumerico||0==gEntidad[f].length?gGrillas[e].UltimaPK=gEntidad[f].length:(g=gGrillas[e].CampoAutonumerico,g=gEntidad[f][gEntidad[f].length-1][g],gGrillas[e].UltimaPK=g),gGrillas[e].PermiteOrdenar&&c&&gGrillas[e].Control.igGridSorting("clearSorting"),0<gGrillas[e].RegistrosPorPagina&&
c&&gGrillas[e].Control.igGridFiltering("filter",[]),gGrillas[e].Control.igGrid("option","dataSource",gEntidad[f]),gGrillas[e].Control.igGrid("dataBind"),b&&(gGrillas[e].Control.igGridSelection("clearSelection"),gGrillas[e].ValorPK=-1,gGrillas[e].ColIdEnEdicion=-1,gGrillas[e].ColumnaEnEdicion="")});$.each(gGraficosAux,function(b,c){var d=gGraficos[c].Tabla;if(""==a||-1!==a.indexOf("|"+d+"|"))d=gGraficos[c].NombreControl,graf_MostrarAdicGrafico(d, false),graf_DestruirGrafico(d)});$.each(gListasAdjuntosAux,
function(b,c){var d=gListasAdjuntos[c].Tabla;if(""==a||-1!==a.indexOf("|"+d+"|")){var e=gListasAdjuntos[c].NombreControl;qlstadj_VaciarLista(e);for(var h=0;h<gEntidad[d].length;h++)gEntidad[d][h].Estado!=gEstadoAdjunto.Borrado&&qlstadj_AgregarVistaAdjunto(e, false,h,h);gListasAdjuntos[c].UltId=gEntidad[d].length}});qgrdpvt_DestruirGrdPvt()}
function qcom_EjecutarCondicion(a,b,c,d){$("#divCargando").addClass("show");b=sessionStorage.getItem("idses");a={pDsEntidad:qcom_CargarTablasAEnviar(c,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),
pTieneDSEsp:gTieneDsEsp,pEsEspecializada:d,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pNombreCondicion:a,pFormulario:gConfiguracion.getFormulario(),pIdSes:b};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/Condicion.ashx",data:a,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");void 0==a.e?(qevt_EliminarNodosCond(a.d),qevt_EjecutarSiguiente()):(qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show"),qcom_TratarError(a.e))}).fail(function(a,
b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_MostrarReporteConParamDesdeServer(a,b,c,d,e,f,g){$("#divCargando").addClass("show");var h=sessionStorage.getItem("idses");d={pDsEntidad:qcom_CargarTablasAEnviar(d,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),
pTieneDSEsp:gTieneDsEsp,pEsEspecializada:e,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pMetodoParametros:a,pMetodoNombreReporte:b,pFormulario:gConfiguracion.getFormulario(),pIdSes:h};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/ParamReporte.ashx?pTipo=C",data:d,dataType:"json"}).done(function(d){$("#divCargando").removeClass("show");if(void 0==d.e){var e=d.d;d=d.m;""==a&&(e=qcom_ObtenerParametrosReporte());""==b&&(d=f);qcom_MostrarReporte(d,e,g,c);qevt_EjecutarSiguiente()}else qcom_TratarError(d.e)}).fail(function(a,
b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_EjecutarAccionFE(a,b,c,d){var e=sessionStorage.getItem("idses");a={pDsEntidad:qcom_CargarTablasAEnviar(b,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pTieneDSEsp:gTieneDsEsp,
pEsEspecializada:d,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pNombreAccion:a,pTablasPlanas:gTablasPlanas.join("|"),pFormulario:gConfiguracion.getFormulario(),pIdSes:e};$("#divCargando").addClass("show");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/AcFEEjecutar.ashx",data:a,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");void 0==a.e?(gEntidad=qcom_CargarTablasARefrescar(c,a,gEntidad),c=""==c?"":"|"+c+"|",qcom_CargarControlesFormulario(c, false),qevt_EjecutarSiguiente()):
(qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show"),qcom_TratarError(a.e))}).fail(function(a,b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_existeControl("#divMensajeItera")&&$("#divMensajeItera").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_EjecutarDescargaArchivoGeneral(a,b){$("#divCargando").addClass("show");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/DescargarArchivo.ashx",data:a,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");if(void 0==a.e){a=JSON.parse(a.d);if(0<a.Principal.length&&""!=a.Principal[0].Archivo){var c=qcom_ObtenerTipoContDownLoad(a.Principal[0].EsURL,a.Principal[0].Extension),e=window.document.createElement("a");e.id="reftemporal";e.innerText=a.Principal[0].Titulo;
e.href=c+a.Principal[0].Archivo;e.download=a.Principal[0].NombreArchivoDescargado;document.body.appendChild(e);qcom_DescargarArchivo("temporal",b);document.body.removeChild(e)}qevt_EjecutarSiguiente()}else qcom_TratarError(a.e)}).fail(function(a,b,e){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(e,"danger",null)})}
function qcom_EjecutarDescargaArchivo(a,b,c,d,e){b=sessionStorage.getItem("idses");a={pDsEntidad:qcom_CargarTablasAEnviar(c,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pTieneDSEsp:gTieneDsEsp,
pEsEspecializada:d,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pNombreAccion:a,pFormulario:gConfiguracion.getFormulario(),pIdSes:b};qcom_EjecutarDescargaArchivoGeneral(a,e)}
function qcom_GeneraryDescargaXLS(a,b,c){var d=sessionStorage.getItem("idses"),e={Principal:[]};e.Principal=[{ArchivoXLS:"",Existe: false,NombreArchivoXLS:"",NombreReporte:a,Parametros:b}];a={pDsEntidad:JSON.stringify(e),pDllEventos:"MiscelaneosFEEventos",pClaseEventos:"MiscelaneosFEEventos.misReporteAXLS",pDllCommon:"MiscelaneosCommon",pClaseCommon:"MiscelaneosCommon.misReporteAXLSDS",pDllEventosEsp:"",pClaseEventosEsp:"",pDllCommonEsp:"",pClaseCommonEsp:"",pTieneDSEsp: false,pEsEspecializada: false,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,
pNombreAccion:"ReporteAXLS",pFormulario:"",pIdSes:d};qcom_EjecutarDescargaArchivoGeneral(a,c)}
function qcom_EjecutarMostrarPDFEspecialGral(a,b){$("#divCargando").addClass("show");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/DescargarArchivo.ashx",data:a,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");void 0==a.e?(a=JSON.parse(a.d),window.open("").document.write("<html><head><title>"+a.Principal[0].Titulo+"</title></head><body><iframe title='QuasarGlobal' width='100%' height='100%' src='data:application/pdf;base64, "+encodeURI(a.Principal[0].Archivo)+
"'></iframe></body></html>"),qevt_EjecutarSiguiente()):qcom_TratarError(a.e)}).fail(function(a,b,e){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(e,"danger",null)})}
function qcom_EjecutarDatosIndicador(a,b,c,d,e){c=sessionStorage.getItem("idses");b={pDsEntidad:qcom_CargarTablasAEnviar(d,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pTieneDSEsp:gTieneDsEsp,
pEsEspecializada:e,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pNombreAccion:b,pFormulario:gConfiguracion.getFormulario(),pIdSes:c};$("#divCargando").addClass("show");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/DatosIndicador.ashx",data:b,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");void 0==b.e?(b=JSON.parse(b.d),0<b.Indicador.length&&qindic_Crear(a,b.Indicador[0].Valor,b.Indicador[0].TextoAdicionalValor,b.Rangos),qevt_EjecutarSiguiente()):qcom_TratarError(b.e)}).fail(function(a,
b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_EjecutarMostrarPDFEspecial(a,b,c,d){var e=sessionStorage.getItem("idses");a={pDsEntidad:qcom_CargarTablasAEnviar(c,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),pTieneDSEsp:gTieneDsEsp,
pEsEspecializada:d,pNombreAccion:a,pFormulario:gConfiguracion.getFormulario(),pIdSes:e};qcom_EjecutarMostrarPDFEspecialGral(a,b)}
function qcom_GeneraryDescargaXLSConParamDesdeServer(a,b,c,d,e){$("#divCargando").addClass("show");var f=sessionStorage.getItem("idses");b={pDsEntidad:qcom_CargarTablasAEnviar(c,gEntidad),pDllEventos:gFormulario.getDLLEventos(),pClaseEventos:gFormulario.getClaseEventos(),pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllEventosEsp:gFormulario.getDLLEventosEsp(),pClaseEventosEsp:gFormulario.getClaseEventosEsp(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),
pTieneDSEsp:gTieneDsEsp,pEsEspecializada:d,pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pMetodoParametros:b,pMetodoNombreReporte:"",pFormulario:gConfiguracion.getFormulario(),pIdSes:f};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/ParamReporte.ashx?pTipo=C",data:b,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");void 0==b.e?(qcom_GeneraryDescargaXLS(a,b.d,e),qevt_EjecutarSiguiente()):qcom_TratarError(b.e)}).fail(function(a,b,c){qevt_VaciarEventosTmp();
$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}function qcom_ObtenerDatosComboGrilla(a,b){QLupaAdv_CamposRet=null;$("#divCargando").addClass("show");var c=sessionStorage.getItem("idses");$.ajax({type:"POST",url:"AjaxHandler/QComboAdvDatos.ashx",data:{Identidad:a,IdSes:c},dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");b(a)}).fail(function(a,b,c){$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_ObtenerSegmento(a){for(var b=null,c= false,d=gSegmentos.length,e=0;e<d&&!c;e++)gSegmentos[e].getNombre()==a&&(b=gSegmentos[e],c= true);c||(gSegmentos[d]=new qcom_segmento(a),b=gSegmentos[d]);return b}function qcom_InicializarSegmento(a){for(var b=null,c= false,d=gSegmentos.length,e=0;e<d&&!c;e++)gSegmentos[e].getNombre()==a&&(gSegmentos[e]=new qcom_segmento(a),b=gSegmentos[e],c= true);c||(gSegmentos[d]=new qcom_segmento(a),b=gSegmentos[d]);return b}
function qcom_EsTablaPlana(a){for(var b= false,c=gTablasPlanas.length,d=0;d<c&&!b;d++)b=gTablasPlanas[d]==a;return b}
function qcom_InicializarColumnasSegmento(a){for(var b=gSegmentos.length,c=0;c<b;c++)if(!a||gSegmentos[c].getPrincipal())lSufijo=gSegmentos[c].getSufijo(),lTabla=gSegmentos[c].getTabla(),qcom_EsTablaPlana(lTabla)&&0<gEntidad[lTabla].length&&(gEntidad[lTabla][0]["Segmento_Id"+lSufijo]=gSegmentos[c].getIdSeg(),gEntidad[lTabla][0]["Segmento1N"+lSufijo]=0,gEntidad[lTabla][0]["Segmento2N"+lSufijo]=0,gEntidad[lTabla][0]["Segmento3N"+lSufijo]=0,gEntidad[lTabla][0]["Segmento4N"+lSufijo]=0,gEntidad[lTabla][0]["Segmento1C"+
lSufijo]="",gEntidad[lTabla][0]["Segmento2C"+lSufijo]="",gEntidad[lTabla][0]["Segmento3C"+lSufijo]="",gEntidad[lTabla][0]["Segmento4C"+lSufijo]="")}
function qcom_InicializarColumnasSegmentoFila(a,b){for(var c=gSegmentos.length,d=0;d<c;d++)lTabla=gSegmentos[d].getTabla(),lTabla==a&&(lSufijo=gSegmentos[d].getSufijo(),b["Segmento_Id"+lSufijo]=gSegmentos[d].getIdSeg(),b["Segmento1N"+lSufijo]=0,b["Segmento2N"+lSufijo]=0,b["Segmento3N"+lSufijo]=0,b["Segmento4N"+lSufijo]=0,b["Segmento1C"+lSufijo]="",b["Segmento2C"+lSufijo]="",b["Segmento3C"+lSufijo]="",b["Segmento4C"+lSufijo]="")}
function qcom_CargoOcultosSegmentoFila(a,b){for(var c=gSegmentos.length,d=0;d<c;d++){var e=gSegmentos[d];lTabla=e.getTabla();if(lTabla==a)for(var f=1;8>=f;f++)""!=e.getCampoNCCtrlSeg(f)&&""!=e.getCampoNCCtrl(f)?b[e.getCampoNCCtrlSeg(f)]=qcom_ObtenerValorControl(gControles[e.getTabla()][0][e.getCampoNCCtrl(f)]):""!=e.getCampoNCCtrlSeg(f)&&(b[e.getCampoNCCtrlSeg(f)]=qcom_ObtenerValorControl(gControles[e.getTabla()][0][e.getCampoNCCtrlSeg(f)]))}}
function qcom_EsControlOcultoSegmento(a,b){for(var c= false,d=gSegmentos.length,e=0;e<d;e++)if(lSeg=gSegmentos[e],lSeg.getTabla()==a)for(var f=1;8>=f&&!c;f++)c=""!=lSeg.getCampoNCCtrl(f)&&lSeg.getCampoNCCtrlSeg(f)==b;return c}
function qcom_SegmentoCompleto(a){var b= true;a=qcom_ObtenerSegmento(a);for(var c=1;8>=c&&b;c++)""!=a.getCampoNCCtrl(c)?b=""!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrl(c)])&&0!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrl(c)]):"MX"!=gConfiguracion.getDominio()?""!=a.getCampoNCCtrlSeg(c)&&(5>c||a.getCampoCtrlSeg(1)!=a.getCampoNCCtrlSeg(c)&&a.getCampoCtrlSeg(6)!=a.getCampoNCCtrlSeg(c))&&(b=""!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrlSeg(c)])&&
0!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrlSeg(c)])):""!=a.getCampoNCCtrlSeg(c)&&(5>c||a.getCampoCtrlSeg(1)!=a.getCampoNCCtrlSeg(c)&&a.getCampoCtrlSeg(5)!=a.getCampoNCCtrlSeg(c))&&(b=""!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrlSeg(c)])&&0!=qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrlSeg(c)]));return b}
function qcom_LimpiarControlesOcultosSegmento(){for(var a=gSegmentos.length,b=0;b<a;b++){lSeg=gSegmentos[b];for(var c=1;8>=c;c++)""!=lSeg.getCampoNCCtrl(c)&&""!=lSeg.getCampoNCCtrlSeg(c)&&qcom_AsignarValorControl(gControles[lSeg.getTabla()][0][lSeg.getCampoNCCtrlSeg(c)],null, false)}}
function qcom_AsignarValorCodigoNuevo(){if(""!=gCampoCodigoNuevo&&0<gCamposClaves.length){var a=qcom_ObtenerValorControl(gControles.Principal[0][gCamposClaves[0]]);qcom_AsignarValorControl(gControles.Principal[0][gCampoCodigoNuevo],a, false)}}function qcom_BlanquearAdicionalesLupaGrilla(a,b){if(""!=b)for(var c=b.split("|"),d=0;d<c.length;d++)qcom_AsignarValorColumnaGrilla(a,c[d],"")}
function qcom_AsignarValorColumnaGrilla(a,b,c){var d=a.igGridUpdating("editorForKey",b);if(void 0!=d)switch(a.igGrid("columnByKey",b).dataType){case "date":d.igDatePicker("option","value",c);break;case "number":d.igNumericEditor("option","value",c);break;default:d.igTextEditor("option","value",c)}}function qcom_GuardarEntidad(a,b){"function"==typeof b?(gEntidad.Principal[0].Posteado=a,$("#Procesando").show(),b(),$("#Procesando").hide()):qcom_Alerta(qrecNo_Implmentado,"info",null)}
function qcom_EliminarEntidad(a){"function"==typeof a?qcom_Confirmar(qrecConfBorrado,"warning",function(){$("#Procesando").show();a();$("#Procesando").hide()},null):qcom_Alerta(qrecNo_Implmentado,"info",null)}function qcom_EliminarEntidadNoDefault(a){"function"==typeof a?($("#Procesando").show(),a(),$("#Procesando").hide()):qcom_Alerta(qrecNo_Implmentado,"info",null)}
function ConsultaxCambiosSinGuardar(){var a= false;gTieneSinGuardar&&($("#btnPostear").hasClass("hidden")&&$("#btnPostear").hasClass("hidden")||(a= true));return a}function SesionValida(){return gSesionValida}
function qcom_NuevaEntidad(a){if(ConsultaxCambiosSinGuardar())qcom_Confirmar(qrefConfPerderCambios,"warning",function(){gTieneSinGuardar=gEntidad.Principal[0].Posteado= false;if(a){var b=qcom_ObtenerDescPKAntesPegar();qevt_InicializarForm( false, false, true);var c=new qevt_evento;c.Acciones.push(new qevt_accion("0","A",null,""));c.Acciones.push(new qevt_accion("1","A",qcom_PegarFormulario,"",[b]));qevt_AgregarEventoaTmp("",c, false);1==gEventosTmp.length&&qevt_EjecutarSiguiente()}else qevt_InicializarForm( true, false, true)},
function(){qevt_VaciarEventosTmp()});else if(gTieneSinGuardar=gEntidad.Principal[0].Posteado= false,a){var b=qcom_ObtenerDescPKAntesPegar();qevt_InicializarForm( false, false, true);var c=new qevt_evento;c.Acciones.push(new qevt_accion("0","A",null,""));c.Acciones.push(new qevt_accion("1","A",qcom_PegarFormulario,"",[b]));qevt_AgregarEventoaTmp("",c, false);1==gEventosTmp.length&&qevt_EjecutarSiguiente()}else qevt_InicializarForm( true, false, true)}
function qcom_HabilitarGuardar(){gFormulario.getPostear()&&gFormulario.getUsuarioModif()&&!gEntidad.Principal[0].Posteado?$("#btnGuardar").show():$("#btnGuardar").hide();gFormulario.getPostear()&&gFormulario.getUsuarioPostear()?$("#btnPostear").show():$("#btnPostear").hide()}function qcom_blanquearCambiosSinGuardarySolapAct(){qcom_InicSolapasActivadas( false);qcom_blanquearCambiosSinGuardar()}function qcom_blanquearCambiosSinGuardar(){gTieneSinGuardar= false;qevt_EjecutarSiguiente()}
function qcom_marcarCambiosSinGuardar(){gTieneSinGuardar= true;qevt_EjecutarSiguiente()}
function qcom_verificoEntidadEmpresa(){var a= true;void 0!=gEntidad.Principal[0].Empresa_Id&&"undefined"!=gEntidad.Principal[0].Empresa_Id&&(null==gEntidad.Principal[0].Empresa_Id||0==gEntidad.Principal[0].Empresa_Id?a= true:gConfiguracion.getEmpresa()!=gEntidad.Principal[0].Empresa_Id&&(0>gConfiguracion.getFormulario().indexOf("genEmpresas")?a= false:void 0!=gEntidad.Principal[0].genEmpresas&&"undefined"!=gEntidad.Principal[0].genEmpresas&&(null==gEntidad.Principal[0].genEmpresas||0==gEntidad.Principal[0].genEmpresas?
a= true:gConfiguracion.getEmpresa()!=gEntidad.Principal[0].genEmpresas&&(a= false))));a?(qcom_HabilitarGuardar(),gFormulario.getBorrar()&&gFormulario.getUsuarioBorrar()&&$("#btnEliminar").show()):($("#btnGuardar").hide(),$("#btnPostear").hide(),$("#btnEliminar").hide());qevt_EjecutarSiguiente()}function qcom_HabilitarControl(a){qcom_AccionSobreControl(a,"E")}function qcom_DesHabilitarControl(a){qcom_AccionSobreControl(a,"D")}
function qcom_ObtenerValorParametroFiltro(a){if("{"==a.charAt(0))a=gConfiguracion.getValorVariable(a);else if(a.startsWith("[var_"))a=a.substring(1,a.length-1),a=gVariables[a];else if("["==a.charAt(0)){var b=a.substring(1,a.length-1).split(":");lTabla=b[0];lColumna=b[1];void 0!=lColumna?(a=qcom_ObtenerValorControl(gControles[lTabla][0][lColumna]),"0"==a&&2==gControles[lTabla][0][lColumna].getTipoControl()&&(a="")):(a=a.substring(1,a.length-2).split("["),lSegmento=a[0],lParte=a[1],a=void 0!=lParte?
qcom_ObtenerValorParteSeg(lSegmento,lParte):$("#"+lTabla).igTextEditor()[0].value)}return a}
function qcom_AccionSobreControl(a,b){var c="#"+a,d="",e="";if(qcom_existeControl(c))qcom_AccionSobreControlAux(c,b),d="#lbl"+a,e="#o_"+a;else if(c="#"+a+"_1",lcontrolDesc="#"+a+"_d",d="#lbl"+a+"_1",lcontrolbtn="#btn_"+a,e="#o_"+a+"_1",qcom_existeControl(c))qcom_AccionSobreControlAux(c,b),qcom_existeControl(lcontrolDesc)&&qcom_AccionSobreControlAux(lcontrolDesc,b),qcom_existeControl(lcontrolbtn)&&qcom_AccionSobreControlAux(lcontrolbtn,b);else if(0<gGrillasAux.length)qgrillas_AccionSobreMenuCtxt(a,
b);else{var f="",c=$('input[name="'+a+'"]:checked');0<c.length&&(f=c[0].id);c=$("input[name='"+a+"']");$.each(c,function(a,c){c.id!=f&&qcom_AccionSobreControlAux("#"+c.id,b)})}qcom_existeControl(d)&&qcom_AccionSobreControlAux(d,b);qcom_existeControl(e)&&qcom_AccionSobreControlAux(e,b)}
function qcom_AccionSobreControlAux(a,b){if("H"==b)$(a).hide();else if("S"==b)$(a).show();else if("D"==b)if($(a).hasClass("quasar-editortexto"))$(a).igTextEditor("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editornumerico"))$(a).igNumericEditor("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editorporcentaje"))$(a).igPercentEditor("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editorfecha"))$(a).igDatePicker("option",
"disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editorcombo"))$(a).igCombo("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editormascara"))$(a).igMaskEditor("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if($(a).hasClass("quasar-editorhora"))$(a).igDateEditor("option","disabled", true),$(a).addClass("quasar-deshabilitado");else if(void 0!=gComboMulti[a.substring(1)])$(a).igCombo("option","disabled", true),
$(a).addClass("quasar-deshabilitado");else if(void 0!=gGrillas[a.substring(1)]){var c=gGrillas[a.substring(1)];c.EsArbol||c.AutoFormateable||(lcontrolRef="#aref"+a.substring(1),qcom_existeControl(lcontrolRef)&&$(lcontrolRef).hide(),$(a).igGridUpdating("option","enableDeleteRow", false),$(a).igGridUpdating("option","editMode","none"))}else $(a).prop("disabled", true);else"E"!=b||gSL||($(a).hasClass("quasar-editortexto")?($(a).removeClass("quasar-deshabilitado"),$(a).igTextEditor("option","readOnly")?($(a).igTextEditor("option",
"readOnly", false),$(a).igTextEditor("option","disabled", false),$(a).igTextEditor("option","readOnly", true)):$(a).igTextEditor("option","disabled", false)):$(a).hasClass("quasar-editornumerico")?($(a).removeClass("quasar-deshabilitado"),$(a).igNumericEditor("option","disabled", false)):$(a).hasClass("quasar-editorporcentaje")?($(a).removeClass("quasar-deshabilitado"),$(a).igPercentEditor("option","disabled", false)):$(a).hasClass("quasar-editorfecha")?($(a).removeClass("quasar-deshabilitado"),$(a).igDatePicker("option",
"disabled", false)):$(a).hasClass("quasar-editorcombo")?($(a).removeClass("quasar-deshabilitado"),$(a).igCombo("option","disabled", false)):$(a).hasClass("quasar-editorhora")?($(a).removeClass("quasar-deshabilitado"),$(a).igDateEditor("option","disabled", false)):$(a).hasClass("quasar-editormascara")?($(a).removeClass("quasar-deshabilitado"),$(a).igMaskEditor("option","readOnly")?($(a).igMaskEditor("option","readOnly", false),$(a).igMaskEditor("option","disabled", false),$(a).igMaskEditor("option","readOnly", true)):$(a).igMaskEditor("option",
"disabled", false)):void 0!=gComboMulti[a.substring(1)]?($(a).removeClass("quasar-deshabilitado"),$(a).igCombo("option","disabled", false)):void 0!=gGrillas[a.substring(1)]?(c=gGrillas[a.substring(1)],c.EsArbol||c.AutoFormateable||(lcontrolRef="#aref"+a.substring(1),qcom_existeControl(lcontrolRef)&&$(lcontrolRef).show(),c.PermBorrar&&$(a).igGridUpdating("option","enableDeleteRow", true),c.PermEditar&&$(a).igGridUpdating("option","editMode","cell"))):$(a).prop("disabled", false))}
function qcom_HabilitarOpcionOptionGroup(a,b){var c=$("input[name='"+a+"']");$.each(c,function(a,c){c.value==b&&qcom_AccionSobreControlAux("#"+c.id,"E")})}function qcom_DeshabilitarOpcionOptionGroup(a,b){var c=$("input[name='"+a+"']");$.each(c,function(a,c){c.value==b&&qcom_AccionSobreControlAux("#"+c.id,"D")})}function qcom_OcultarControlIncrustado(a){qcom_AccionSobreControl("div"+a,"H");qevt_AgregarEventoaTmp(a+"_Ocultando",null, true)}
function qcom_OcultarControl(a){qcom_AccionSobreControl("div"+a,"H")}function qcom_OcultarControlBtnAsocGrilla(a){qcom_AccionSobreControl(a,"H")}function qcom_OcultarSolapa(a){$("#li"+a).hide();for(var b=gSolapas.length,c= false,d=0;d<b&&!c;d++)gSolapas[d].Nombre==a&&(gSolapas[d].EstaVisible= false,c= true)}function qcom_MostrarControlBtnAsocGrilla(a){qcom_AccionSobreControl(a,"S")}
function qcom_MostrarSolapa(a){$("#li"+a).show();for(var b=gSolapas.length,c= false,d=0;d<b&&!c;d++)gSolapas[d].Nombre==a&&(c=gSolapas[d].EstaVisible= true)}function qcom_MostrarControlIncrustado(a,b){var c="true";$("#div"+a)[0].hasAttribute("VisiblexPais")&&(c=$("#div"+a)[0].getAttribute("VisiblexPais"));"true"==c&&(qcom_AccionSobreControl("div"+a,"S"),""!=b&&qpopup_AsignarValorParametrosPopup(b,""),qevt_AgregarEventoaTmp(a+"_Mostrando",null, true))}
function qcom_MostrarControl(a){var b="true";$("#div"+a)[0].hasAttribute("VisiblexPais")&&(b=$("#div"+a)[0].getAttribute("VisiblexPais"));"true"==b&&qcom_AccionSobreControl("div"+a,"S")}function qcom_ObtenerValorParteSeg(a,b){var c,d=qcom_ObtenerSegmento(a);"number"!==jQuery.type(b)&&(b=gOrigenesSeg[b]);c=""!=d.getCampoCtrl(b)?d.getCampoCtrl(b):d.getCampoCtrlSeg(b);return qcom_ObtenerValorControl(gControles[d.getTabla()][0][c])}
function qcom_SetearValorParteSeg(a,b,c){a=qcom_ObtenerSegmento(a);b=""!=a.getCampoCtrl(b)?a.getCampoCtrl(b):a.getCampoCtrlSeg(b);qcom_AsignarValorControl(gControles[a.getTabla()][0][b],c, false)}function qcom_CambiarTituloParteSeg(a,b,c){a=qcom_ObtenerSegmento(a);b=""!=a.getCampoCtrl(b)?a.getCampoCtrl(b):a.getCampoCtrlSeg(b);b=gControles[a.getTabla()][0][b];b=b.getControl().selector.substring(1,b.getControl().selector.length);$("#div"+b)[0].innerText=c}
function qcom_existeControl(a){return $(a).length? true: false}
function qcom_ObtenerParametrosImpresion(a){lseparador=lretorno="";var b=null;if(""!=a)for(var c= false,d=gSegmentos.length,e=0;e<d&&!c;e++)gSegmentos[e].getNombre()==a&&(b=gSegmentos[e],c= true);if(null!=b)for(lretorno+="Segmento_Id|"+b.getIdSeg(),lseparador="@",a=1;8>=a;a++)""!=b.getCampoNCCtrlSeg(a)&&""!=b.getCampoNCCtrl(a)?(c=qcom_ObtenerValorControl(gControles[b.getTabla()][0][b.getCampoNCCtrl(a)]),lretorno+=lseparador+b.getCampoNCCtrlSeg(a).substring(0,b.getCampoNCCtrlSeg(a).length-b.getSufijo().length)+
"|"+c,lretorno+=lseparador+b.getCampoNCCtrl(a)+"|"+c):""!=b.getCampoNCCtrlSeg(a)&&(lretorno+=lseparador+b.getCampoNCCtrlSeg(a).substring(0,b.getCampoNCCtrlSeg(a).length-b.getSufijo().length)+"|"+qcom_ObtenerValorControl(gControles[b.getTabla()][0][b.getCampoNCCtrlSeg(a)])),lseparador="@";else for(e=0;e<gCamposClaves.length;e++)lretorno+=lseparador+gCamposClaves[e]+"|"+qcom_ObtenerValorControl(gControles.Principal[0][gCamposClaves[e]]),lseparador="@";return lretorno}
function qcom_MostrarImpresion(a,b){$.ajax({type:"POST",url:"QEncriptar.ashx",data:{Valor:b},dataType:"text"}).done(function(b){lparamEncriptado=b;b=sessionStorage.getItem("idses");smUrl="WebFrmPDF.aspx?Par="+lparamEncriptado+"&tipo="+a+"&pref="+b;smArg="ImpresionPDF"+lparamEncriptado;smFtr="toolbar=yes,scrollbars=yes,resizable=yes,top=20,left=20,width=400,height=600";window.open(smUrl,smArg,smFtr)}).fail(function(a,b,e){qcom_MensajeError(e)})}
function qcom_CompletarOcultosSegmentos(a){a=qcom_ObtenerSegmento(a);for(var b=1;8>=b;b++)""!=a.getCampoNCCtrl(b)&&""!=a.getCampoNCCtrlSeg(b)&&qcom_AsignarValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrlSeg(b)],qcom_ObtenerValorControl(gControles[a.getTabla()][0][a.getCampoNCCtrl(b)]), false)}
function qcom_CompletarOcultoSegmento(a,b){var c=qcom_ObtenerSegmento(a);""!=c.getCampoNCCtrl(b)&&""!=c.getCampoNCCtrlSeg(b)&&qcom_AsignarValorControl(gControles[c.getTabla()][0][c.getCampoNCCtrlSeg(b)],qcom_ObtenerValorControl(gControles[c.getTabla()][0][c.getCampoNCCtrl(b)]), false)}
function qcom_ObtenerParametrosReporte(){lseparador=lretorno="";var a=ObtenerSegmentoPrincipal();null!=a&&(lretorno+="Segmento_Id|"+a.getIdSeg(),lseparador="@");$.each(gTablasPlanas,function(a,c){$.each(gEntidad[c][0],function(a,b){"Existe"!=a&&null!=gControles[c][0][a]&&(lretorno+=lseparador+a+"|"+qcom_ObtenerValorControl(gControles[c][0][a]),lseparador="@")})});return lretorno}
function qcom_MostrarReporte(a,b,c,d){$.ajax({type:"POST",url:"QEncriptar.ashx",data:{Valor:b},dataType:"text"}).done(function(b){var e=sessionStorage.getItem("idses"),g=.9*$(window).width(),h=.9*$(window).height();""==d?e="webfrmReport.aspx?Par="+b+"&rpt="+a+"&metdatos="+c+"&dlleventos="+gFormulario.getDLLEventos()+"&claseeventos="+gFormulario.getClaseEventos()+"&dlleventosesp="+gFormulario.getDLLEventosEsp()+"&claseeventosesp="+gFormulario.getClaseEventosEsp()+"&pref="+e:(qcom_CargarTablasAEnviar("",
gEntidad),e="webfrmReport.aspx?Par="+b+"&rpt="+a+"&metdatos="+c+"&metxml="+d+"&dlleventos="+gFormulario.getDLLEventos()+"&claseeventos="+gFormulario.getClaseEventos()+"&dlleventosesp="+gFormulario.getDLLEventosEsp()+"&claseeventosesp="+gFormulario.getClaseEventosEsp()+"&pref="+e);window.open(e,"Reporte"+b,"toolbar=yes,scrollbars=yes,resizable=yes,top=0,left=0,width="+g+",height="+h)}).fail(function(a,b,c){qcom_MensajeError(c)})}
function qcom_ObtenerValorParametrosFiltro(a){var b="";a=a||"";if(""!=a){a=a.split("@");for(var c="",d=0;d<a.length;d++)lFiltro=a[d].split(";"),b+=c+lFiltro[0]+";"+lFiltro[1]+";",b+=qcom_ObtenerValorParametroFiltro(lFiltro[2])+";"+lFiltro[3],c="@";b=b.replace("+","%2B")}return b}
function qcom_mostrarSolapa(a){for(var b=gSolapas.length,c=null,d=0;d<b;d++){var e=gSolapas[d].Nombre;e!=a||$("#li"+e)[0].classList.contains("active")||(gSolapas[d].Activada?c=gSolapas[d].Activado:(gSolapas[d].Activada= true,c=gSolapas[d].Activado1));$("#tab"+e)[0].style.display="none";$("#li"+e)[0].className=$("#li"+e)[0].className.replace(" active","")}0<b&&($("#tab"+a)[0].style.display="block",$("#li"+a)[0].className+=" active");null!=c&&"undefined"!==typeof c&&jQuery.isFunction(c)&&c()}
function qcom_solapaActiva(){var a=gSolapas.length,b="";if(0==a)b="Solapa_Datos";else for(var c=0;c<a&&""==b;c++){var d=gSolapas[c].Nombre;$("#li"+d)[0].classList.contains("active")&&(b=d)}return b}function qcom_MensajeError(a){$("#divAlertas").html("<div class='alert alert-danger alert-dismissable' style='padding-top:4px; padding-bottom:4px'><a href='#' class='close' data-dismiss='alert' aria-label='close'>\u00d7</a><strong>Error: </strong> "+a+"</div>");$("#divAlertas").show()}
function qcom_MensajeExito(a){$("#divMensajeExito").html("<div id='msjecerrar' class='alert alert-success alert-dismissable quasar-mensaje-exito'><a href='#' class='close' data-dismiss='alert' aria-label='close'>x</a>"+a+"</div>");$("#divMensajeExito").show();$("#msjecerrar").fadeTo(8E3,2E3).slideUp(2E3,function(){$("#msjecerrar").slideUp(2E3)})}
function qcom_MensajeInformacion(a){$("#divAlertas").html("<div class='alert alert-info alert-dismissable' style='padding-top:4px; padding-bottom:4px'><a href='#' class='close' data-dismiss='alert' aria-label='close'>\u00d7</a><strong>Informacion: </strong> "+a+"</div>");$("#divAlertas").show()}function qcom_Alerta(a,b,c){qcom_AlertaCompleto(a,b,c,0,null)}
function qcom_AlertaErrorQBI(){var a= false,b="danger",c=0,d=qrecErrorQBI;0<gEventosTmp.length&&($("#divCargando").addClass("show"),gEventosTmp[0].Acciones.unshift(new qevt_accion("0","A",null,"")),a= true,b="dangerQBI",c=1E4,d=qrecErrorQBIConAcciones);qBSAlert({messageText:d,alertType:b,timeout:c}).done(function(b){$("#divCargando").removeClass("show");a&&qevt_EjecutarSiguiente()}).fail(function(a,b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_AlertaCompleto(a,b,c,d,e){qBSAlert({messageText:a,alertType:b,timeout:d,controlfoco:e}).done(function(a){null!=c&&qevt_EjecutarSiguiente()})}
function qcom_AlertaFinSesion(a){qBSAlert({messageText:qrecSesionExpirada+" - "+a,alertType:"danger"}).done(function(a){var b=sessionStorage.getItem("idinst"),d=sessionStorage.getItem("grpinst");a=sessionStorage.getItem("empfija");var e=sessionStorage.getItem("sitio");$("#divCargando").addClass("show");$.ajax({type:"POST",url:e+"AjaxHandler/FormAcciones.ashx?Accion=OI",data:{pGrupoInstalacion:d,pInstalacion:b,pEmpFija:a},dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");""!=
d?window.open("Login.aspx?sit="+d,"_parent"):""!=b?window.open("Login.aspx?sit="+b,"_parent"):window.open("Login.aspx","_parent")}).fail(function(a,c,e){$("#divCargando").removeClass("show");""!=d?window.open("Login.aspx?sit="+d,"_parent"):""!=b?window.open("Login.aspx?sit="+b,"_parent"):window.open("Login.aspx","_parent")})})}function qcom_AlertaSesionInvalida(a){gSesionValida= false;window.open("webfrmError.aspx?error=2&msgadic="+a,"_top")}function qcom_AlertaErrorServicio(){qcom_AlertaErrorQBI()}
function qcom_AlertaErrorNoControlado(a){gSesionValida= false;window.open("webfrmError.aspx?error="+a,"_top")}
function qcom_AlertaSinPermisos(){$("#btnNuevo").addClass("hidden");$("#btnGuardar").addClass("hidden");$("#btnPostear").addClass("hidden");$("#btnEliminar").addClass("hidden");$("#btnRptVer").addClass("hidden");$("#btnRptImprimir").addClass("hidden");$("#btnRptPdf").addClass("hidden");$("#btnRptXls").addClass("hidden");qBSAlert({messageText:qrecPermisoNoValido,alertType:"danger"}).done(function(a){$("#divCargando").removeClass("show")}).fail(function(a,b,c){$("#divCargando").removeClass("show")})}
function qcom_Confirmar(a,b,c,d){qBSAlert({type:"confirm",messageText:a,alertType:b}).done(function(a){a?null!=c&&c():null!=d&&d()})}function qcom_EsTeclaxaModif(a){return 8==a||16==a||46==a||48<=a&&57>=a||65<=a&&90>=a||106<=a&&111>=a||186<=a&&192>=a||219<=a&&222>=a}
function qcom_ProcesarCambioEntidad(a,b,c){ConsultaxCambiosSinGuardar()?($("#tabSolapa_Datos").prop("disabled", true),qcom_Confirmar(qrefConfPerderCambios,"warning",function(){$("#tabSolapa_Datos").prop("disabled", false);gTieneSinGuardar=gCtrlCambioCont= false;$("#btnGuardar")[0].disabled= true;$("#btnPostear")[0].disabled= true;gValorAnt="";c&&c()},function(){$("#tabSolapa_Datos").prop("disabled", false);qcom_AsignarValorControl(b,a, false);gValorAnt="";qevt_VaciarEventosTmp()})):(gCtrlCambioCont= true,gTieneSinGuardar= false,
$("#btnGuardar")[0].disabled= true,$("#btnPostear")[0].disabled= true,gValorAnt="")}function qcom_DeshabilitoGuardar(){gCtrlCambioCont||(gTieneSinGuardar=gCtrlCambioCont= true,$("#btnGuardar")[0].disabled= true,$("#btnPostear")[0].disabled= true)}function qcom_DeshabilitoGuardarxInputs(){gCtrlCambioCont||(gCtrlCambioCont= true,$("#btnGuardar")[0].disabled= true,$("#btnPostear")[0].disabled= true)}function qcom_HabilitoGuardar(){gCtrlCambioCont= false;$("#btnGuardar")[0].disabled= false;$("#btnPostear")[0].disabled= false}
function qcom_DeshabilitoAceptarPopup(a){$("#btnAceptargrd"+a)[0].disabled= true}function qcom_HabilitoAceptarPopup(a){$("#btnAceptargrd"+a)[0].disabled= false}
function qcom_Clonar(a){var b,c;if(null==a||"object"!=typeof a)return a;if(a.constructor==Date||a.constructor==RegExp||a.constructor==Function||a.constructor==String||a.constructor==Number||a.constructor==Boolean)return new a.constructor(a);if(a.constructor!=Object&&a.constructor!=Array)return a;c=new a.constructor;for(b in a)c[b]=qcom_Clonar(a[b]);return c}
function qcom_TextoaFecha(a){a=a.replace(/\D/g," ").split(" ");if("0001"!=a[0]){a[1]--;var b=new Date(a[0],a[1],a[2],3<a.length?a[3]:0,3<a.length?a[4]:0,3<a.length?a[5]:0)}return b}function qcom_FormatearFechaGrilla(a,b){"string"==jQuery.type(a)&&(a=qcom_TextoaFecha(a));if(null==a)return"";var c=a.getFullYear();if("0001"==c)return"";var d=(1+a.getMonth()).toString(),d=1<d.length?d:"0"+d,e=a.getDate().toString(),e=1<e.length?e:"0"+e;return e+b+d+b+c}
function qcom_FormatearFechaGrilla2(a,b){"string"==jQuery.type(a)?a=qcom_TextoaFecha(a):"number"==jQuery.type(a)&&(a=new Date(a));if(null==a||"0001"==a.getFullYear())return"";a.getMonth();a.getDate();return""==b?$.ig.formatter(a,"date","dd-MM-yyyy"):-1<b.indexOf("{")?b.replace("{0}",$.ig.formatter(a,"date","dd-MM-yyyy")):$.ig.formatter(a,"date",b)}function qcom_ObtenerDescCombo(a,b){for(var c=b,d=a.length,e= false,f=0;f<d&&!e;f++)a[f].Valor==b&&(e= true,c=a[f].Descripcion);return c}
function qcom_RecrearMaskEditor(a,b){""==b&&(b=$(a)[0].getAttribute("MaskDefecto"));var c=$(a),d=c.data("igMaskEditor").options;if(d.inputMask!=b){var e=document.activeElement.id===c[0].id,f=$(a)[0].getAttribute("ValorAnteMask").replace(/\-|\./g,"").trim(),g=$(a)[0].getAttribute("MaskDefecto");c.igMaskEditor("destroy");d.inputMask=b;d.value=f;c.igMaskEditor(d);e&&$(a).focus();$(a)[0].setAttribute("ValorAnteMask",c.igMaskEditor("value"));$(a)[0].setAttribute("MaskDefecto",g)}}
function qcom_TratarError(a){if(a.startsWith("error:logout")){a=a.split("|");var b="";1<a.length&&(b=a[1]);qcom_AlertaFinSesion(b)}else a.startsWith("error:invalido")?(a=a.split("|"),b="",1<a.length&&(b=a[1]),qcom_AlertaSesionInvalida(b)):a.startsWith("error:qbi")?qcom_AlertaErrorServicio():("undefined"!==typeof qevt_VaciarEventosTmp&&qevt_VaciarEventosTmp(),qcom_Alerta(a.substring(6),"danger",null))}
function qcom_TratarShortCutGrillas(a){var b="",b=0<gPilaPPs.length?gGruposGrilla[gPilaPPs[gPilaPPs.length-1]].getNombreControl():qcom_solapaActiva();if(""!=b){var c="";$.each(gGrillasAux,function(d,e){gGrillas[e].Contenedor==b&&gGrillas[e].ShortCut==a.toUpperCase()&&(c=e)});""!=c&&qevt_Grilla_NuevaFila(c, true)}}
function qcom_TratarEnterEnPPGrilla(){var a;0<gPilaPPs.length&&(a=gPilaPPs[gPilaPPs.length-1],void 0!=$("#btnAceptargrd2"+a)&&void 0!=$("#btnAceptargrd"+a)&&$("#btnAceptargrd"+a).is(":Visible")&&$("#btnAceptargrd2"+a).focus())}function qcom_TratarShortCutSolapas(a){var b=gSolapas.length;if(0<b){a=parseInt(a);for(var c= false,d="",e=0;e<b&&!c;e++)d=gSolapas[e].Nombre,$("#li"+d).is(":visible")&&(a--,0==a&&(c= true));c&&qcom_mostrarSolapa(d)}}
function qcom_ObtenerSesStrg(a){var b=new Date;a=b.getHours();var c=b.getMinutes(),d=b.getSeconds(),b=b.getMilliseconds();a=("0"+a).slice(-2)+("0"+c).slice(-2)+("0"+d).slice(-2)+("00"+b).slice(-3);sessionStorage.setItem("idses",a);return sessionStorage.getItem("idses")}
function qcom_SetearEnServerSesStrg(a,b,c){if(void 0!=sessionStorage.getItem("idses")&&null!=sessionStorage.getItem("idses")){var d=sessionStorage.getItem("idses"),e=sessionStorage.getItem("idinst"),f=sessionStorage.getItem("grpinst"),g=sessionStorage.getItem("empfija"),h=sessionStorage.getItem("sitio");$.ajax({type:"POST",url:h+"AjaxHandler/FormAcciones.ashx?Accion=SS",data:{pIdSesion:d,pGrupoInstalacion:f,pInstalacion:e,pSoloIdSes:a,pIngresoDirecto: false,pEmpFija:g},dataType:"json"}).done(function(a){null!=
c&&c();b&&window.open("Login.aspx","_top")}).fail(function(a,b,c){qcom_MensajeError(c)})}}
function qcom_CambiarValorVariableSesion(a,b){if(void 0!=sessionStorage.getItem("idses")&&null!=sessionStorage.getItem("idses")){var c=sessionStorage.getItem("idses");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/FormAcciones.ashx?Accion=CVS",data:{pIdSesion:c,pVariable:a,pValor:b},dataType:"json"}).done(function(c){sessionStorage.setItem(a,b);pvariable="Sucursal";$(window)[0].parent.qprin_CambiarSucursal(b);qevt_EjecutarSiguiente()}).fail(function(a,b,c){qevt_VaciarEventosTmp();
qcom_MensajeError(c)})}}
function qcom_DescargarArchivo(a,b){var c=$("#ref"+a)[0];""==c?qcom_Alerta(qrecNoHayArchivoXaDescarga,"danger",null):b?($("#divDownLoad").append('<a href="'+c.href+'" download="'+c.download+'" class="quasar-ahref-descarga" >'+c.innerText+"</a><br><br>"),$("#divModalDownload").modal({backdrop:"static"}),$("#divModalDownload").draggable({handle:".modal-header"}),$("#divModalDownload").unbind("hidden.bs.modal"),$("#divModalDownload").on("hidden.bs.modal",function(a){$("#divDownLoad").empty()})):c.click()}
function qcom_DeshabilitarSegmento(a){qcom_HabilitacionSegmento(a, false)}function qcom_HabilitarSegmento(a){qcom_HabilitacionSegmento(a, true)}
function qcom_HabilitacionSegmento(a,b){var c=qcom_ObtenerSegmento(a);c.getTabla();for(var d=1;8>=d;d++){var e=null;""!=c.getCampoNCCtrlSeg(d)&&""!=c.getCampoNCCtrl(d)?e=gControles[c.getTabla()][0][c.getCampoNCCtrl(d)]:""!=c.getCampoNCCtrlSeg(d)&&(e=gControles[c.getTabla()][0][c.getCampoNCCtrlSeg(d)]);null!=e&&(e=e.getControl()[0].id,e.endsWith("_1")&&(e=e.substring(0,e.length-2)),b?qcom_HabilitarControl(e):qcom_DesHabilitarControl(e))}c="#btn"+a;qcom_existeControl(c)&&(b?qcom_AccionSobreControlAux(c,
"E"):qcom_AccionSobreControlAux(c,"D"))}function qcom_CargarTablasAEnviar(a,b){if(""==a)return JSON.stringify(b);lEntidadAyuda=qcom_Clonar(gEntidadAyuda);for(var c=a.split("|"),d=0;d<c.length;d++)lEntidadAyuda[c[d]]=qcom_Clonar(b[c[d]]);return JSON.stringify(lEntidadAyuda)}
function qcom_CargarTablasARefrescar(a,b,c){if(""==a)return b;a=a.split("|");for(var d=0;d<a.length;d++)c[a[d]]=qcom_Clonar(b[a[d]]),gTieneGrillasAutoForm&&void 0!=b[a[d]+"fmt"]&&(c[a[d]+"fmt"]=qcom_Clonar(b[a[d]+"fmt"]));return c}function qcom_ActivarSolapa(a){for(var b=$(".tablinks"),c=0;c<b.length;c++)$("#"+b[c].id).removeClass("active"),$("#"+b[c].id.replace("liSolapa","tabSolapa")).hide();$("#li"+a).addClass("active");$("#li"+a).click();$("#tab"+a+" :input:enabled:visible:first").focus()}
function qcom_AbrirFormularioSolapa(){var a=sessionStorage.getItem("idses"),b=JSON.stringify({pIdSes:a});$.ajax({type:"POST",url:"webfrmPrincipal.aspx/AbrirFormularioInicial",contentType:"application/json; charset=utf-8",dataType:"json",data:b}).done(function(b){if(b.d.startsWith("error:"))qcom_TratarError(b.d);else if(""!=b.d){var c=b.d.split("||"),e=b="",f="";0<c.length&&(b=c[0]);1<c.length&&(c=c[1].split("|"),e=c[0],f=c[1]);qprin_CrearSolapa("webfrmBasico.aspx?frm="+b+"&pref="+a+"&pI="+e+"&pS=f&pEP=f",
f)}}).fail(function(a,b,e){qcom_Alerta(a.responseText,"danger",null)})}
function qcom_CambiarEstadoFavorito(a){if(""==a){$("#divCargando").addClass("show");a=sessionStorage.getItem("idses");var b=$("#btnFavorito").hasClass("quasar-btn-no-favorito");$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/FormAcciones.ashx?Accion=CEF",data:{pFavorito:b,pFormulario:gConfiguracion.getFormulario(),pIdSes:a},dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");"OK"==a.d?$("#btnFavorito").hasClass("quasar-btn-no-favorito")?($("#btnFavorito").removeClass("quasar-btn-no-favorito"),
$("#btnFavorito").addClass("quasar-btn-favorito"),$(window)[0].parent.qprin_CambiarFavoritos(gConfiguracion.getFormulario(),"fav")):($("#btnFavorito").removeClass("quasar-btn-favorito"),$("#btnFavorito").addClass("quasar-btn-no-favorito"),$(window)[0].parent.qprin_CambiarFavoritos(gConfiguracion.getFormulario(),"nofav")):qcom_TratarError(a.d)}).fail(function(a,b,e){$("#divCargando").removeClass("show");qcom_MensajeError(e)})}else"fav"==a&&$("#btnFavorito").hasClass("quasar-btn-no-favorito")?($("#btnFavorito").removeClass("quasar-btn-no-favorito"),
$("#btnFavorito").addClass("quasar-btn-favorito")):"nofav"==a&&$("#btnFavorito").hasClass("quasar-btn-favorito")&&($("#btnFavorito").removeClass("quasar-btn-favorito"),$("#btnFavorito").addClass("quasar-btn-no-favorito"));$("#btnFavorito").blur()}
function qcom_EliminarSegmento(a,b){var c=qcom_ObtenerSegmento(a);if(c.getIdSeg()!=b&&""!=b){$("#divCargando").addClass("show");var d={pIdSes:sessionStorage.getItem("idses"),pFormulario:gConfiguracion.getFormulario(),pControl:a,pSegmento:b};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/CambioSegmento.ashx",data:d,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");void 0==b.e?(""!=b.d&&($("#div"+a).empty(),c.getPrincipal()&&gCamposClaves.splice(0,gCamposClaves.length),
qcom_InicializarSegmento(a),$("#div"+a).append(b.d),gtmpFnc=new Function(b.o),gtmpFnc(),gtmpFnc2=new Function(b.f),gtmpFnc2(),gtmpFnc3=new Function(b.c),gtmpFnc3()),qevt_EjecutarSiguiente()):qcom_TratarError(b.e)}).fail(function(a,b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}else qevt_EjecutarSiguiente()}
function qcom_CambiarEstiloLabel(a,b){qcom_existeControl("#lbl"+a)?($("#lbl"+a).removeClass(),$("#lbl"+a).addClass("quasar-checkbox-label"),""!=b&&$("#lbl"+a).addClass(b)):qcom_existeControl("#"+a)&&($("#"+a).removeClass(),""!=b&&$("#"+a).addClass(b))}
function qcom_MostrarLinkAyuda(a){$("#divCargando").addClass("show");var b=sessionStorage.getItem("idses"),b={pCodigo:a,pFormulario:gConfiguracion.getFormulario(),pIdSes:b};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/ObtenerLinkAyuda.ashx",data:b,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");if(void 0==b.e)if(b=b.d,""==b)qcom_Alerta("El c\u00f3digo ("+a+") no tiene link asociado","danger",null);else{var c=.9*$(window).width(),e=.9*$(window).height();smUrl=
b;smFtr="toolbar=yes,scrollbars=yes,resizable=yes,top=10,left=10,width="+c+",height="+e;window.open(smUrl,"_blank",smFtr)}else qcom_TratarError(b.e)}).fail(function(a,b,e){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(e,"danger",null)})}function qcom_EsEdge(){return-1<navigator.userAgent.indexOf("Edge")}function qcom_EsChrome(){var a=navigator.userAgent;return!qcom_EsEdge()&&-1<a.indexOf("Chrome")}
function qcom_ObtenerSODispositivo(){var a=window.navigator.userAgent,b=window.navigator.platform,c=["Win32","Win64","Windows","WinCE"],d=["iPhone","iPad","iPod"],e=null;-1!==["Macintosh","MacIntel","MacPPC","Mac68K"].indexOf(b)?e="MacOS":-1!==d.indexOf(b)?e="iOS":-1!==c.indexOf(b)?e="Windows":/Android/.test(a)?e="Android":/iPhone/.test(a)?e="iOS":!os&&/Linux/.test(b)&&(e="Linux");return e}function qcom_CerrarFormActual(){$(window)[0].parent.qprin_CerrarFormulario(null)}
function qcom_CerrarFormActualEnPopup(){$(window)[0].parent.$("#divModalForm").modal("hide")}
function qcomunes_PartesSegmentosUbicacion(a){for(var b=$(".quasar-box-segm-variable"),c=0;c<b.length;c++)$("#"+b[c].id).data("ancho")+$("#"+b[c].id).data("ancho-total")>a-20?$("#"+b[c].id).data("ancho")+$("#"+b[c].id).data("ancho-parcial")>a-20?$("#"+b[c].id).width("calc(100% - 25px"):$("#"+b[c].id).width("calc(100% - "+$("#"+b[c].id).data("ancho-parcial")+"px)"):$("#"+b[c].id).width("calc(100% - "+$("#"+b[c].id).data("ancho-total")+"px)")}
function qcom_HabilitarCopiarContenido(a){$("#div"+a).unbind("copy")}function qcom_DeshabilitarCopiarContenido(a){$("#div"+a).unbind("copy");$("#div"+a).bind("copy",function(a){a.preventDefault()})}function qcom_CambiarVisibilidadBtnPegar(a){a?$("#btnPegar").show():$("#btnPegar").hide()}
function qcom_CopiarFormulario(){try{qcom_ControlesaTablasPlanas();var a=JSON.stringify(qcom_Clonar(gEntidad));$.ajax({type:"POST",url:"QEncriptar.ashx",data:{Valor:a},dataType:"text"}).done(function(a){lparamEncriptado=a;$(window)[0].parent.qprin_CopiarfrmaPortapapel(lparamEncriptado,gConfiguracion.getFormulario());qcom_MensajeExito(qrecMensajeCopiaFrmOK)}).fail(function(a,c,d){qcom_MensajeError(d)})}catch(b){qcom_Alerta(qrecMensajeCopiaFrmNoOK,"danger",null)}}
function qcom_PegarFormulario(a){$("#divCargando").addClass("show");var b=$(window)[0].parent.qprin_CopiarPortapapelaFrm(gConfiguracion.getFormulario());if(null!=b){var c=sessionStorage.getItem("idses"),b={pTieneDsEsp:gTieneDsEsp,pTablasPlanas:gTablasPlanas.join("|"),pTieneTablaAutoFormateable:gTieneGrillasAutoForm,pEntidadAPegar:b,pDllCommon:gFormulario.getDLLCommon(),pClaseCommon:gFormulario.getClaseCommon(),pDllCommonEsp:gFormulario.getDLLCommonEsp(),pClaseCommonEsp:gFormulario.getClaseCommonEsp(),
pIdSes:c};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/ObtenerFrmaPegar.ashx",data:b,dataType:"json"}).done(function(b){$("#divCargando").removeClass("show");void 0==b.e?(qcom_HabilitarGuardar(),gEntidad=qcom_CargarTablasARefrescar("",b,gEntidad),$.each(gControles.Principal[0],function(a,b){if(-1<$.inArray(a,gCamposClaves)||qcom_CampoClaveAsocaSegmento(a))gEntidad.Principal[0][a]=qcom_ObtenerValorControl(gControles.Principal[0][a])}),b=a.split("|"),""!=b[0].trim()&&(gEntidad.Principal[0][b[0]]=
b[1]),void 0!=gEntidad.Principal[0].Posteado&&(gEntidad.Principal[0].Posteado= false),void 0!=gEntidad.Principal[0].Existe&&(gEntidad.Principal[0].Existe= false),gTieneSinGuardar= true,qcom_CargarControlesFormulario("", true, true),qevt_AgregarEventoaTmp("Pegando_Form",null, false),qevt_EjecutarSiguiente()):qcom_TratarError(b.e)}).fail(function(a,b,c){qcom_MensajeError(c)})}else qevt_VaciarEventosTmp()}
function qcom_VerifPuedePegarFrm(){try{gConfiguracion.getFormulario()==$(window)[0].parent.qprin_ObtenerNombreFrmPortaPapel()&&qcom_CambiarVisibilidadBtnPegar( true)}catch(a){}}
function qcom_ObtenerDescPKAntesPegar(){var a=" ",b=" ";if(1==gCamposClaves.length){var c="#"+gControles.Principal[0][gCamposClaves[0]].getControlConjunto()+"_d";qcom_existeControl(c)&&(a=$(c).igTextEditor()[0].value);$.each(gControles.Principal[0],function(a,e){null!=gControles.Principal[0][a]&&c==gControles.Principal[0][a].getControl().selector&&(b=a)})}return b+"|"+a}
function qcom_QuitarCortina(){var a=$(".modal-backdrop.fade");0<a.length&&($(".modal-backdrop.fade")[a.length-1].remove(),gEventosTmp=[])}function qcom_Navegador_Permite_Pegar(){navigator.permissions.query({name:"clipboard-read"}).then(function(a){qevt_EliminarNodosCond("S");qevt_EjecutarSiguiente()})["catch"](function(a){qevt_EliminarNodosCond("N");qevt_EjecutarSiguiente()})}
function qcom_FocoEnCtrlOculto(a,b,c){var d=b.substring(2,b.length),e="";null!=a.relatedTarget&&(e=a.relatedTarget.id);if(e!=d)0==gEventosTmp.length?$("#"+d).focus():gCtrlProxFoco="#"+d;else if(""!=c)for(a=$("#divGrupogrd"+c)[0].querySelectorAll("[id^='o_']"),c= false,gCtrlProxFoco="",d=1;d<a.length&&!c;d++)a[d].id==b&&(c= true,0==gEventosTmp.length?$("#"+a[d-1].id).focus():gCtrlProxFoco="#"+a[d-1].id)}function qcom_KeydownCtrolOculto(a){a.preventDefault()}
function qcom_BlurCtrolOculto(){gCtrlProxFoco=""}function qcom_IniciarTimer(a,b,c){null==a&&(a=setInterval(c,b));return a}function qcom_DetenerTimer(a){null!=a&&clearTimeout(a);return null}function qcom_ReproducirAudio(a){(new Audio(a)).play()}
function qcom_ObtenerValorEnEquipo(a,b){$("#divCargando").addClass("show");var c={pTipoOperacion:"O",pNombre:a};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/AcCookies.ashx",data:c,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");void 0==a.e?(a=a.d,null!=b&&b(a)):qcom_TratarError(a.e)}).fail(function(a,b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");qcom_Alerta(c,"danger",null)})}
function qcom_EstablecerValorEnEquipo(a,b){$("#divCargando").addClass("show");var c={pTipoOperacion:"A",pNombre:a,pValor:b};$.ajax({type:"POST",url:gConfiguracion.getSitio()+"AjaxHandler/AcCookies.ashx",data:c,dataType:"json"}).done(function(a){$("#divCargando").removeClass("show");void 0==a.e?""==a.d?(qevt_VaciarEventosTmp(),qcom_Alerta("No se pudo establecer el valor de la cookie","danger",null)):qevt_EjecutarSiguiente():qcom_TratarError(a.e)}).fail(function(a,b,c){qevt_VaciarEventosTmp();$("#divCargando").removeClass("show");
qcom_Alerta(c,"danger",null)})}function qcom_CrearDivMensajeItera(){qcom_existeControl("#divMensajeItera")||$("body").append('<div id="divMensajeItera" data-backdrop="static" data-keyboard="false"><div class="alert alert-info" role="alert" style="text-align: center; width: 100%"><span>Ejecutando...</span></div></div>')}function qcom_MostrarDivMensajeItera(a){$("#divMensajeItera span").text(a);$("#divMensajeItera").addClass("show");qevt_EjecutarSiguiente()};
